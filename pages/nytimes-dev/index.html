<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Games -DevPage</title>

    <style>
        body{
            margin: 0px;
            padding: 0px;
        }

        .entry{
            display: flex;
            align-items: center;
            gap: 10px;
        }
    </style>
</head>
<body>
    <script>
        const reloadPage = async () => {
            const body = document.querySelector('body');
            while(body.firstChild){ body.firstChild.remove(); }

            const response = await fetch('/nytimes/dev/mini/times');
            const data = await response.json();

            for(const entry of data.entries){
                const newEntry = document.createElement('div');
                newEntry.classList.add('entry');

                for(const [key, value] of Object.entries(entry)){
                    const newKey = document.createElement('div');
                    newKey.innerHTML = `${key}: ${value},`;

                    newEntry.appendChild(newKey);
                }

                // add delete button
                const deleteButton = document.createElement('div');
                deleteButton.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/></svg>';
                newEntry.appendChild(deleteButton);
                deleteButton.addEventListener('click', async () => {
                    const response = await fetch('/nytimes/dev/mini/times/delete', {
                        method: 'POST',
                        body: JSON.stringify({ id: entry.id })
                    });
                    const data = await response.json();

                    if(data.success){ reloadPage(); }
                });

                body.appendChild(newEntry);
            }
        };
        reloadPage();
    </script>
</body>
</html>